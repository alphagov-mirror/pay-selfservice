<h2 id="{{header}}" class="govuk-heading-m govuk-!-margin-top-6">
  {% if tokens.length %}
    {% if tokens_singular %}
      There is 1 {{token_state}} API key
    {% else %}
      There are {{tokens.length}} {{token_state}} API keys
    {% endif %}
  {% else %}
  There are no {{token_state}} API keys
  {% endif %}
</h2>

{% if active %}
  {% set apiKeyLinkRoute = routes.apiKeys.revoked %}
  {% set apiKeyLinkText = 'revoked' %}
{% else %}
  {% set apiKeyLinkRoute = routes.apiKeys.index %}
  {% set apiKeyLinkText = 'active' %}
{% endif %}

<div class="govuk-body">
  <a class="govuk-link" href="{{ apiKeyLinkRoute }}">View {{apiKeyLinkText}} keys</a>
</div>

{% if permissions.tokens_create %}
  {% if active %}
    {{
      govukButton({
        text: "Create a new API key",
        href: routes.apiKeys.create,
        classes: "generate-key",
        attributes: {
          id: "create-api-key"
        }
      })
    }}
  {% endif %}
{% endif %}

{% if tokens.length %}
<div class="key-list">
  {% for token in tokens %}
    {% include "./_key.njk" %}
  {% endfor %}
</div>
{% endif %}
